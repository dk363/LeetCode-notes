# 递归
```cpp
class Solution {
    // left < root && right > root
    // right < root && left > root
    // left < root && right < root val = max(left, right)
public:
    int maxPathSum(TreeNode* root) {
        int ans = INT_MIN;
        
        auto dfs = [&](this auto&& dfs, TreeNode* node) -> int {
            if (node == nullptr) return 0;

            // 这里用 max(0, ...) 就很好的解决了多次分类讨论的问题
            int left = max(0, dfs(node->left));
            int right = max(0, dfs(node->right));

            // 更新答案
            ans = max(ans, left + right + node->val);
            // return 当前的最大值
            return node->val + max(left, right);
        };

        dfs(root);
        return ans;
    }
};
```
