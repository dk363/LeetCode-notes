# 模拟长除法
## 对于小数
小数分为
1. 有限小数 
2. 无限小数
   1. 无限不循环小数
   2. 无限循环小数
为什么这里不会有无限不循环小数 
因为题目规定了是整数相除
整数在加法运算下构成一个阿贝尔群
在整数的阿贝尔群（加法）和环（加法+乘法）结构上，通过引入分母的逆元，把它扩张成了一个 域。
因此这里不会有无限不循环小数
## 对于除法
q 为整数部分 r 为余数部分
q = num / deno r = num / deno
r *= 10
q = r / deno r = r % deno
然后记录余数的位置 如果后面出现了一摸一样的余数 
## 数的组成
一个数有 符号位 整数位 小数位 三部分组成
因此这里通过依次处理即可
```cpp
class Solution {
public:
    string fractionToDecimal(int numerator, int denominator) {
        long long a = numerator, b = denominator;
        // 这里有乘法 会发生大数溢出
        string sign = a * b < 0 ? "-" : "";
        long long num = abs(a), deno = abs(b);
        long long q = num / deno, r = num % deno;
        if (r == 0) {
            return sign + to_string(q);
        }
        string ans = sign + to_string(q) + ".";
        // 用 ans.size() 代表pos 省去空间开销
        unordered_map<long long, int> r_to_pos{{r, ans.size()}};
        while (r) {
            r *= 10;
            q = r / deno;
            r %= deno;
            // 不需要用 to_string 直接 O(1)
            ans += ('0' + q);
            if (r_to_pos.contains(r)) {
                int pos = r_to_pos[r];
                return ans.substr(0, pos) + "(" + ans.substr(pos, ans.size()) + ")";
            }
            r_to_pos[r] = ans.size();
        }
        return ans;
    }
};
```